(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4d38"],{"+uO2":function(e,t,a){"use strict";a.r(t);var i=a("eZT2"),n=a.n(i);for(var l in i)"default"!==l&&function(e){a.d(t,e,function(){return i[e]})}(l);t.default=n.a},"2Z8N":function(e,t,a){"use strict";var i=a("X+Nu");a.n(i).a},"966M":function(e,t,a){"use strict";a.r(t);var i=a("PZrY"),n=a("KHVp");for(var l in n)"default"!==l&&function(e){a.d(t,e,function(){return n[e]})}(l);a("2Z8N");var r=a("KHd+"),o=Object(r.a)(n.default,i.a,i.b,!1,null,"4734c398",null);o.options.__file="role.vue",t.default=o.exports},B2IJ:function(e,t,a){},KHVp:function(e,t,a){"use strict";a.r(t);var i=a("SVQF"),n=a.n(i);for(var l in i)"default"!==l&&function(e){a.d(t,e,function(){return i[e]})}(l);t.default=n.a},MCZB:function(e,t,a){"use strict";a.r(t);var i=a("g5pU"),n=a("+uO2");for(var l in n)"default"!==l&&function(e){a.d(t,e,function(){return n[e]})}(l);a("xHmS");var r=a("KHd+"),o=Object(r.a)(n.default,i.a,i.b,!1,null,"ac21573a",null);o.options.__file="index.vue",t.default=o.exports},PZrY:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e.isList?a("el-row",{staticStyle:{display:"flex","flex-direction":"column",height:"100%"}},[a("el-row",[a("el-row",{staticStyle:{"margin-top":"15px","padding-bottom":"60px",flex:"1"}},[a("el-table",{key:"userList",staticStyle:{width:"100%",height:"698px",overflow:"auto"},attrs:{data:e.roleList,"max-height":"698"}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"角色ID",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"角色名称",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"角色描述",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?a("el-link",{attrs:{underline:!1,type:"success"}},[e._v("正常")]):e._e(),e._v(" "),-1==t.row.state?a("el-link",{attrs:{underline:!1,type:"danger"}},[e._v("停用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"option",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看资料",placement:"bottom"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-tickets"},on:{click:function(a){e.showRoleDetail(t.row,t.$index)}}})],1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设置权限",placement:"bottom"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-s-tools"},on:{click:function(a){e.showTreeDialog(t.row.id,t.$index)}}})],1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"用户授权",placement:"bottom"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-s-custom"},on:{click:function(a){e.showTransferDialog(t.row.id,t.$index)}}})],1)]}}])})],1)],1),e._v(" "),a("el-row",{staticClass:"page-block-body",attrs:{type:"flex"}},[a("el-pagination",{staticClass:"page-block",attrs:{"current-page":e.search.page,"page-sizes":[10,15,20,50,100,200,300,400],"page-size":e.search.pageSize,total:e.search.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.changePageSize,"current-change":e.changePage}})],1)],1)],1):a("el-row",[a("role-info",{attrs:{"role-detail":e.roleDetail,"role-detail-index":e.roleDetailIndex},on:{backList:e.backList}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogTreeVisible,title:e.dialogTreeTitle},on:{"update:visible":function(t){e.dialogTreeVisible=t}}},[a("el-tree",{ref:"tree",attrs:{props:e.defaultProps,data:e.treeData,"expand-on-click-node":!1,"check-strictly":!0,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"","check-on-click-node":""}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTreeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.modifyRolePermission}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogTransferVisible,title:e.dialogTransferTitle},on:{"update:visible":function(t){e.dialogTransferVisible=t}}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-transfer",{attrs:{titles:["待选用户","已选用户"],"filter-method":e.filterMethod,data:e.transferData,filterable:"","filter-placeholder":"请输入关键字"},model:{value:e.transferSelectedValue,callback:function(t){e.transferSelectedValue=t},expression:"transferSelectedValue"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTransferVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.modifyRoleUser}},[e._v("确 定")])],1)],1)],1)},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},SVQF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(a("MCZB")),n=a("zF5t");t.default={name:"AdminRole",components:{RoleInfo:i.default},data:function(){return{isList:!0,currentRoleId:0,formLabelWidth:"120px",dialogTreeTitle:"设置权限",dialogTreeVisible:!1,dialogTransferTitle:"用户授权",dialogTransferVisible:!1,search:{page:1,limit:10,total:0},roleList:[],treeData:[],defaultProps:{children:"children",label:"title"},transferData:[],transferSelectedValue:[],filterMethod:function(e,t){return!0}}},created:function(){},mounted:function(){this.getRoleList(),this.getAllPermission()},methods:{getAllPermission:function(){var e=this;(0,n.getAllPermission)().then(function(t){e.treeData=t.data.data})},getRoleList:function(){var e=this;(0,n.getRoleList)(this.search).then(function(t){e.roleList=t.data.data.data,e.search.total=t.data.data.total})},showRoleDetail:function(e,t){this.roleDetail=e,this.roleDetailIndex=t,this.isList=!1},changePageSize:function(e){var t=this;this.search.limit=e,(0,n.getRoleList)(this.search).then(function(e){t.roleList=e.data.data.data,t.search.total=e.data.data.total})},changePage:function(e){var t=this;this.search.page=e,(0,n.getRoleList)(this.search).then(function(e){t.roleList=e.data.data.data,t.search.total=e.data.data.total})},backList:function(){this.isList=!0},showTreeDialog:function(e,t){var a=this;this.currentRoleId=e,this.dialogTreeTitle="设置权限("+this.roleList[t].name+")",(0,n.getRolePermission)(e).then(function(e){a.dialogTreeVisible=!0,a.$nextTick(function(){a.$refs.tree.setCheckedKeys(e.data.data.permission_list.split(","))})}).catch(function(e){a.$message({message:e,type:"error"})})},showTransferDialog:function(e,t){var a=this;this.currentRoleId=e,this.dialogTransferTitle="用户授权("+this.roleList[t].name+")",(0,n.getRoleUser)(e).then(function(e){a.transferData=e.data.data.all,a.transferSelectedValue=e.data.data.selected,a.dialogTransferVisible=!0}).catch(function(e){a.$message({message:e,type:"error"})})},modifyRolePermission:function(){var e=this,t=this.currentRoleId,a=this.$refs.tree.getCheckedKeys().join(",");(0,n.modifyRolePermission)(t,a).then(function(t){e.$message({message:"设置权限成功",type:"success"}),e.dialogTreeVisible=!1}).catch(function(t){e.$message({message:t,type:"error"})})},modifyRoleUser:function(){var e=this,t=this.currentRoleId,a=this.transferSelectedValue;(0,n.modifyRoleUser)(t,a).then(function(t){e.$message({message:"用户授权成功",type:"success"}),e.dialogTransferVisible=!1}).catch(function(t){e.$message({message:t,type:"error"})})}}}},"X+Nu":function(e,t,a){},eZT2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("zF5t");t.default={name:"RoleInfo",props:{roleDetail:{type:Object,required:!0},roleDetailIndex:{type:Number,required:!0}},data:function(){return{}},watch:{},created:function(){},mounted:function(){},methods:{backList:function(){this.$emit("backList")},updateRole:function(){var e=this,t=this.roleDetail;t.role_id=this.roleDetail.id,(0,i.updateRole)(t).then(function(t){e.$message({message:"更新成功",type:"success"})})}}}},g5pU:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-card",{staticStyle:{width:"70%"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("角色信息")])]),e._v(" "),a("el-form",{attrs:{model:e.roleDetail,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{disabled:""},model:{value:e.roleDetail.id,callback:function(t){e.$set(e.roleDetail,"id",t)},expression:"roleDetail.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.roleDetail.name,callback:function(t){e.$set(e.roleDetail,"name",t)},expression:"roleDetail.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{model:{value:e.roleDetail.desc,callback:function(t){e.$set(e.roleDetail,"desc",t)},expression:"roleDetail.desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-input",{attrs:{disabled:""},model:{value:e.roleDetail.create_time,callback:function(t){e.$set(e.roleDetail,"create_time",t)},expression:"roleDetail.create_time"}})],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.updateRole}},[e._v("更新")]),e._v(" "),a("el-button",{on:{click:e.backList}},[e._v("取消")])],1)],1)],1)],1)},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},xHmS:function(e,t,a){"use strict";var i=a("B2IJ");a.n(i).a},zF5t:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addRole=function(e){return(0,i.default)({url:"",method:"post",data:e,params:{c:"Admin",m:"addRole"}}).then(function(e){return e})},t.updateRole=function(e){return(0,i.default)({url:"",method:"post",data:{id:e.id,name:e.name,desc:e.desc},params:{c:"Admin",m:"updateRole"}}).then(function(e){return e})},t.getRoleList=function(e){return(0,i.default)({url:"",method:"post",data:e,params:{c:"Admin",m:"getRoleList"}}).then(function(e){return e})},t.getRoleTypeList=function(e){return(0,i.default)({url:"",method:"post",data:e,params:{c:"Admin",m:"getRoleTypeMap"}}).then(function(e){return e})},t.getRolePermission=function(e){return(0,i.default)({url:"",method:"post",data:{id:e},params:{c:"Admin",m:"getRolePermission"}}).then(function(e){return e})},t.modifyRolePermission=function(e,t){return(0,i.default)({url:"",method:"post",data:{role_id:e,permission:t},params:{c:"Admin",m:"updateRolePermission"}}).then(function(e){return e})},t.getRoleUser=function(e){return(0,i.default)({url:"",method:"post",data:{role_id:e},params:{c:"Admin",m:"getRoleUser"}}).then(function(e){return e})},t.modifyRoleUser=function(e,t){return(0,i.default)({url:"",method:"post",data:{role_id:e,admin_id_array:t},params:{c:"Admin",m:"updateUserRole"}}).then(function(e){return e})},t.getAllPermission=function(){return(0,i.default)({url:"",method:"post",params:{c:"Admin",m:"getAllPermission"}}).then(function(e){return e})};var i=function(e){return e&&e.__esModule?e:{default:e}}(a("t3Un"))}}]);